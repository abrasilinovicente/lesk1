# OpenDKIM Configuration File
# This is a basic configuration for signing and verifying email

# Modo de operação (s = assinar, v = verificar, sv = ambos)
Mode                    sv

# Log para syslog
Syslog                  yes
SyslogSuccess          yes
LogWhy                 yes

# Configuração de domínios
Domain                  *
SubDomains             yes
AutoRestart            yes
AutoRestartRate        10/1h

# Configuração de assinatura
Canonicalization       relaxed/simple
SignatureAlgorithm     rsa-sha256
MinimumKeyBits         1024

# Arquivos de configuração
KeyTable               /etc/opendkim/KeyTable
SigningTable           refile:/etc/opendkim/SigningTable
ExternalIgnoreList     /etc/opendkim/TrustedHosts
InternalHosts          /etc/opendkim/TrustedHosts

# Socket para comunicação com Postfix
Socket                 inet:12301@localhost

# Configurações de segurança
PidFile                /var/run/opendkim/opendkim.pid
UMask                  002
UserID                 opendkim:opendkim

# Tempo de validade da assinatura (0 = sem expiração)
SignatureTTL           0

# Configurações adicionais
OversignHeaders        From
TrustAnchorFile        /usr/share/dns/root.key
RequireSafeKeys        false

# Configuração para múltiplos domínios
MultipleSignatures     false

# Habilitar verificação de DKIM
Mode                   sv

# Remover assinaturas antigas ao re-assinar
RemoveOldSignatures    yes

# Configurações de performance
Background             yes
DNSTimeout             5
SignHeaders            to,subject,message-id,date,from,mime-version,content-type

# Configuração de Milter
Milter                 yes

# Estatísticas
Statistics             /var/log/opendkim/stats.dat

# Configuração para compatibilidade
TemporaryDirectory     /var/tmp
